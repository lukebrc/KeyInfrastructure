---
import Layout from "../../../layouts/Layout.astro";
import { AdminHeader } from "../../../components/AdminHeader.tsx";
import { CertificateTable } from "../../../components/CertificateTable.tsx";
import { Toaster } from "../../../components/ui/sonner";
import { CreateCertificateButton } from "../../../components/CreateCertificateButton.tsx";
import { CertificatesPageHeader } from "../../../components/CertificatesPageHeader.tsx";

const userId = Astro.url.searchParams.get("userId");
---

<Layout title="Manage Certificates">
  <div class="min-h-screen bg-gradient-to-br from-sky-50 via-blue-50 to-indigo-50">
    <AdminHeader client:load />
    <main class="container mx-auto p-4 md:p-6 lg:p-8">
      <div class="space-y-6">
        <div class="flex items-center justify-between">
          <CertificatesPageHeader client:load userId={userId} />
          <CreateCertificateButton client:load userId={userId} />
        </div>
        <CertificateTable
          client:load
          userId={userId}
          showUserColumn={!userId}
          allowGenerate={true}
        />
      </div>
    </main>
    <Toaster client:load />
  </div>
</Layout>
